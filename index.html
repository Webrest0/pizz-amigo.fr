<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PIZZ’AMIGO — Montmerle-sur-Saône</title>
<meta name="color-scheme" content="dark" />
<style>
:root{--bg:#0b0f14;--panel:#121a2b;--line:#243156;--muted:#b9c2d6;--green:#19c37d;--orange:#ff9f3f}
html,body{margin:0;padding:0;background:var(--bg);color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial}
a{color:#9ec5ff;text-decoration:none} a:hover{text-decoration:underline}
.container{max-width:1050px;margin:0 auto;padding:0 14px}

/* HERO */
.hero-wrap{padding:18px 14px}
.hero{
  height:260px;border-radius:18px;overflow:hidden;
  background:url('./images/oven.jpg') center/cover no-repeat;
  display:flex;align-items:flex-end;border:1px solid #2a375a;
  box-shadow:0 10px 30px rgba(0,0,0,.35)
}
.hero-inner{width:100%;background:linear-gradient(180deg,rgba(0,0,0,0) 0%, rgba(0,0,0,.7) 100%);padding:18px}
.brand{display:flex;align-items:center;gap:8px;font-weight:700;margin-bottom:6px}
.brand .dot{width:10px;height:10px;border-radius:99px;background:#2bff8a;box-shadow:0 0 10px #1ee07a}
h1{font-size:clamp(22px,5vw,38px);line-height:1.08;margin:0 0 6px}
.lead{margin:0;opacity:.92}

/* Bandeau info */
.badge{padding:0 14px;margin-top:4px}
.badge .inner{display:flex;gap:10px;align-items:center;background:#3a1e1e;border:1px solid #774646;color:#ffd3d3;padding:12px 14px;border-radius:12px}
.badge .dot{width:10px;height:10px;border-radius:99px;background:#ff6969;box-shadow:0 0 0 3px rgba(255,105,105,.18)}

/* Sections & carte (inchangé) */
section{padding:18px 14px} h2{font-size:26px;margin:0 0 6px}
.note{color:var(--muted)}
.list{list-style:none;margin:12px 0 26px;padding:0}
.item{display:flex;justify-content:space-between;gap:16px;padding:16px 10px;border-bottom:1px solid rgba(255,255,255,.07)}
.it-left{max-width:72%}
.it-title{font-weight:700;font-size:18px}
.it-desc{opacity:.85;margin-top:4px}
.it-right{text-align:right;display:flex;gap:12px;align-items:center}
.price{color:#32a852;font-weight:700;min-width:72px}
.btn{cursor:pointer;padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.22);background:transparent;color:#fff}
.btn.primary{background:var(--green);border:0;color:#000}
.btn.orange{border-color:var(--orange);color:var(--orange)}
.btn.small{padding:6px 10px;font-size:13px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:16px;margin:12px 0}
.card h3{margin:0 0 10px}
.small{opacity:.8}
.footer{padding:30px 14px 90px;color:#cfd6e6}

/* Panier sticky (inchangé) */
#cartBar{position:sticky;bottom:0;left:0;right:0;display:none;justify-content:center;gap:10px;align-items:center;padding:10px;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);border-top:1px solid rgba(255,255,255,.08);z-index:50}
#cartBar.show{display:flex}

/* Dialog générique */
dialog{border:1px solid var(--line);background:var(--panel);color:#fff;border-radius:14px;max-width:720px;width:95%}
dialog::backdrop{background:rgba(0,0,0,.6)}
hr.sep{border:0;border-top:1px solid rgba(255,255,255,.08);margin:12px 0}

/* ===== MODAL SUPPLÉMENT (inchangé) ===== */
.sup-body{display:flex;flex-direction:column;gap:12px}
.sup-row{display:flex;gap:10px;flex-wrap:wrap}
.sup-help{font-size:13px;opacity:.85}

/* ====== MODAL CHECKOUT — NOUVEAU DESIGN ====== */
/* palette chaude seulement dans le modal */
.ck{--ck-bg:#141821;--ck-panel:#0f141d;--ck-line:#2a375a;--ck-accent:#e86f2b;--ck-accent-2:#b84c2a;--ck-text:#f3e9e4}
#checkout{background:var(--ck-bg);border-color:var(--ck-line)}
#checkout h3{margin:0 0 8px;color:var(--ck-text);letter-spacing:.2px}
#ck-list{white-space:pre-wrap;background:var(--ck-panel);border:1px dashed var(--ck-line);border-radius:12px;padding:10px;margin:10px 0;color:#e9eef6}
.form label{display:block;margin:8px 0 6px;color:#cfd6e6}
.form input,.form textarea{width:100%;padding:12px 12px;border-radius:12px;border:1px solid var(--ck-line);background:#0e1420;color:#fff}
.form textarea{min-height:64px;resize:vertical}

/* une seule colonne + grille d’horaires clean */
.ck-grid{display:grid;grid-template-columns:1fr;gap:12px}
.chips{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin-top:6px}
.chip{
  text-align:center;border:1px solid var(--ck-line);padding:10px 0;border-radius:12px;cursor:pointer;
  background:linear-gradient(180deg,#121a26,#0f151f)
}
.chip.active{background:linear-gradient(180deg,var(--ck-accent),var(--ck-accent-2));border-color:transparent;color:#160e0c;font-weight:700}

/* actions */
.ck-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
.btn.ck-ghost{border:1px solid var(--ck-line);background:#0e1420}
.btn.ck-primary{
  background:linear-gradient(180deg,var(--ck-accent),var(--ck-accent-2));
  border:0;color:#160e0c;font-weight:700
}

/* réduire l’“effet zoom” du dialog natif */
@media (min-width:520px){
  #checkout{max-width:560px}
}
</style>
</head>
<body>

<!-- ===== HERO ===== -->
<div class="hero-wrap">
  <div class="hero">
    <div class="hero-inner container">
      <div class="brand"><span class="dot"></span>PIZZ’AMIGO</div>
      <h1>PIZZ’AMIGO — Montmerle-sur-Saône</h1>
      <p class="lead">Le goût authentique de l’Italie près de chez vous.</p>
    </div>
  </div>
</div>

<!-- Bandeau info -->
<div class="badge">
  <div class="inner"><span class="dot"></span><strong>Fermé pour le moment</strong> — retrouvez-nous ce week-end !</div>
</div>

<div class="container">
  <section>
    <h2>Notre carte</h2>
    <p class="note">Boissons : réglez en ligne, <strong>saveur choisie sur place</strong>.<br>
      <em>Supplément</em> (viande / poisson / œuf / fromage) : <strong>+1 €</strong> par ajout.</p>

    <!-- === CARTE (inchangée, tronquée ici pour gagner de la place : garde la tienne complète) === -->
    <ul id="menu" class="list">
      <!-- PIZZAS -->
      <li class="item" data-name="Margharita" data-price="7.5"><div class="it-left"><div class="it-title">Margharita</div><div class="it-desc">tomate, emmental</div></div><div class="it-right"><div class="price">7,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Chasseur" data-price="8.5"><div class="it-left"><div class="it-title">Chasseur</div><div class="it-desc">tomate, emmental, champignons</div></div><div class="it-right"><div class="price">8,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Sicilienne" data-price="8.5"><div class="it-left"><div class="it-title">Sicilienne</div><div class="it-desc">tomate, emmental, anchois</div></div><div class="it-right"><div class="price">8,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Napolitaine" data-price="9"><div class="it-left"><div class="it-title">Napolitaine</div><div class="it-desc">tomate, emmental, jambon</div></div><div class="it-right"><div class="price">9,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Paysanne" data-price="9.5"><div class="it-left"><div class="it-title">Paysanne</div><div class="it-desc">tomate, emmental, jambon, œuf</div></div><div class="it-right"><div class="price">9,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Capri" data-price="9.5"><div class="it-left"><div class="it-title">Capri</div><div class="it-desc">tomate, emmental, jambon, champignons</div></div><div class="it-right"><div class="price">9,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Mozzarella" data-price="9.5"><div class="it-left"><div class="it-title">Mozzarella</div><div class="it-desc">tomate, emmental, mozzarella</div></div><div class="it-right"><div class="price">9,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Quatre Saisons" data-price="9.5"><div class="it-left"><div class="it-title">Quatre Saisons</div><div class="it-desc">tomate, emmental, oignons, champignons, poivrons, mozzarella</div></div><div class="it-right"><div class="price">9,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Vénitienne" data-price="9.5"><div class="it-left"><div class="it-title">Vénitienne</div><div class="it-desc">tomate, emmental, roquefort, oignons, crème</div></div><div class="it-right"><div class="price">9,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Oslo" data-price="10"><div class="it-left"><div class="it-title">Oslo</div><div class="it-desc">tomate, emmental, thon, champignons, crème</div></div><div class="it-right"><div class="price">10,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Orientale" data-price="10"><div class="it-left"><div class="it-title">Orientale</div><div class="it-desc">tomate, emmental, merguez, poivrons</div></div><div class="it-right"><div class="price">10,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Bolognaise" data-price="10"><div class="it-left"><div class="it-title">Bolognaise</div><div class="it-desc">tomate, emmental, viande hachée, crème, mozzarella</div></div><div class="it-right"><div class="price">10,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Fermière" data-price="10"><div class="it-left"><div class="it-title">Fermière</div><div class="it-desc">tomate, emmental, œuf, lardons, champignons</div></div><div class="it-right"><div class="price">10,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Miel" data-price="10.5"><div class="it-left"><div class="it-title">Miel</div><div class="it-desc">crème, emmental, chèvre frais, miel</div></div><div class="it-right"><div class="price">10,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Forestière" data-price="10.5"><div class="it-left"><div class="it-title">Forestière</div><div class="it-desc">tomate, emmental, poulet, champignons, crème</div></div><div class="it-right"><div class="price">10,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Lyonnaise" data-price="11"><div class="it-left"><div class="it-title">Lyonnaise</div><div class="it-desc">tomate, emmental, saint-marcellin, poulet, crème</div></div><div class="it-right"><div class="price">11,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Quatre Fromages" data-price="11"><div class="it-left"><div class="it-title">Quatre Fromages</div><div class="it-desc">tomate, emmental, chèvre, roquefort, mozzarella</div></div><div class="it-right"><div class="price">11,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Paradoxe" data-price="11"><div class="it-left"><div class="it-title">Paradoxe</div><div class="it-desc">tomate, emmental, œuf, jambon, chorizo, mozzarella</div></div><div class="it-right"><div class="price">11,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Boisée" data-price="11"><div class="it-left"><div class="it-title">Boisée</div><div class="it-desc">crème, emmental, pomme de terre, poulet, poivrons, sauce gruyère</div></div><div class="it-right"><div class="price">11,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Savoyarde" data-price="11"><div class="it-left"><div class="it-title">Savoyarde</div><div class="it-desc">emmental, lardons, reblochon, pomme de terre, crème</div></div><div class="it-right"><div class="price">11,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Carnivore" data-price="11.5"><div class="it-left"><div class="it-title">Carnivore</div><div class="it-desc">tomate, emmental, viande hachée, merguez, œuf, mozzarella</div></div><div class="it-right"><div class="price">11,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Norvégienne" data-price="11.5"><div class="it-left"><div class="it-title">Norvégienne</div><div class="it-desc">emmental, saumon fumé, mozzarella, crème</div></div><div class="it-right"><div class="price">11,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Burger" data-price="12"><div class="it-left"><div class="it-title">Burger</div><div class="it-desc">tomate, emmental, viande hachée, oignons, cheddar, tomate cerise, sauce burger</div></div><div class="it-right"><div class="price">12,00 €</div><button class="btn orange add">Ajouter</button></div></li>
      <!-- BOISSONS -->
      <li class="item" data-name="Canette 33cl (choix sur place)" data-price="1.5" data-drink="1"><div class="it-left"><div class="it-title">Canette 33cl (choix sur place)</div><div class="it-desc">boisson — saveur choisie sur place</div></div><div class="it-right"><div class="price">1,50 €</div><button class="btn orange add">Ajouter</button></div></li>
      <li class="item" data-name="Bouteille 50cl (choix sur place)" data-price="3" data-drink="1"><div class="it-left"><div class="it-title">Bouteille 50cl (choix sur place)</div><div class="it-desc">boisson — saveur choisie sur place</div></div><div class="it-right"><div class="price">3,00 €</div><button class="btn orange add">Ajouter</button></div></li>
    </ul>

    <div class="card">
      <h3>Infos pratiques</h3>
      <div class="small">Nous trouver :</div>
      <ul>
        <li><strong>Vendredi soir</strong> — Saint-Georges-de-Reneins (Parking Caisse d’épargne) • 18:00–21:00 — <a href="https://maps.google.com/?q=Caisse+d'épargne+Saint-Georges-de-Reneins" target="_blank" rel="noopener">Itinéraire</a></li>
        <li><strong>Samedi soir</strong> — Amareins (carrefour des feux) • 18:00–21:00 — <a href="https://maps.google.com/?q=Amareins+carrefour+des+feux" target="_blank" rel="noopener">Itinéraire</a></li>
        <li><strong>Dimanche soir</strong> — Amareins (carrefour des feux) • 18:00–21:00 — <a href="https://maps.google.com/?q=Amareins+carrefour+des+feux" target="_blank" rel="noopener">Itinéraire</a></li>
      </ul>
      <div style="margin-top:8px">Téléphone : <a href="tel:0680480456">06 80 48 04 56</a> • <a href="https://facebook.com" target="_blank" rel="noopener">Facebook</a></div>
    </div>
  </section>

  <footer class="footer small">© PIZZ’AMIGO — Montmerle-sur-Saône</footer>
</div>

<!-- BARRE PANIER (inchangée) -->
<div id="cartBar">
  <span>Panier • <strong id="cartTotal">0,00</strong> €</span>
  <button id="btnView" class="btn">Voir panier</button>
  <button id="btnCheckout" class="btn primary">Passer commande</button>
</div>

<!-- ===== MODAL CHECKOUT (NOUVEAU) ===== -->
<dialog id="checkout">
  <form method="dialog" class="ck">
    <h3>Finaliser la commande</h3>
    <div id="ck-list" class="small"></div>

    <div class="ck-grid">
      <div class="form"><label>Nom*</label><input id="ck-name" placeholder="Votre nom" autocomplete="name"></div>
      <div class="form"><label>Téléphone*</label><input id="ck-phone" placeholder="06…" inputmode="tel" autocomplete="tel"></div>
      <div class="form">
        <label>Heure de retrait*</label>
        <input id="ck-slot" placeholder="19:00">
        <div class="chips" id="slot-chips">
          <span class="chip">18:00</span><span class="chip">18:30</span><span class="chip">19:00</span>
          <span class="chip">19:30</span><span class="chip">20:00</span><span class="chip">20:30</span>
        </div>
      </div>
      <div class="form"><label>Commentaire (optionnel)</label><textarea id="ck-note" placeholder="Sans olives, etc."></textarea></div>
    </div>

    <div class="ck-actions">
      <button class="btn ck-ghost" id="btnClose">Fermer</button>
      <button class="btn ck-primary" id="btnSend">Envoyer la commande</button>
    </div>
  </form>
</dialog>

<!-- ===== MODAL SUPPLÉMENT (inchangé) ===== -->
<dialog id="supModal">
  <div class="sup-body">
    <h3>Supplément pour <span id="supName"></span> ?</h3>
    <div class="sup-help">Ajouter un supplément (+1 €) : viande / poisson / œuf / fromage.</div>
    <div class="sup-row">
      <button class="btn" id="supNo">Sans supplément</button>
      <button class="btn primary" id="supYes">+1 € Supplément</button>
      <select id="supType" style="min-width:180px">
        <option value="viande">viande</option>
        <option value="poisson">poisson</option>
        <option value="œuf">œuf</option>
        <option value="fromage">fromage</option>
      </select>
    </div>
    <div style="display:flex;gap:10px;justify-content:flex-end">
      <button class="btn" id="supCancel">Annuler</button>
    </div>
  </div>
</dialog>

<script>
/* ===== CONFIG API (vide = simulation) ===== */
const API_URL = ""; // mets ton URL /exec ici si tu veux envoyer en vrai

/* ===== PANIER (inchangé) ===== */
const cart = {
  items: [],
  addWithSup(name, price, sups=0, supsList=[]){
    const key=(name+"|"+(supsList.join(","))).toLowerCase();
    const ex=this.items.find(i=>i.key===key);
    if(ex){ ex.qty++; } else this.items.push({key,name,price:parseFloat(price||0),qty:1,sups,supsList});
    renderCartBar();
  },
  total(){ return this.items.reduce((s,i)=> s + (i.price + (i.sups?1:0))*i.qty, 0); },
  clear(){ this.items.length=0; renderCartBar(); }
};
function euro(v){ return v.toFixed(2).replace(".",","); }

/* Ajout + supplément (inchangé) */
let pending = null;
document.getElementById("menu").addEventListener("click", (ev)=>{
  const btn = ev.target.closest(".add"); if(!btn) return;
  const li  = btn.closest(".item");
  const name= li.dataset.name;
  const price= parseFloat(li.dataset.price||"0");
  const isDrink = !!li.dataset.drink;

  if(isDrink){ cart.addWithSup(name,price,0,[]); return; }

  pending = {name,price};
  document.getElementById("supName").textContent = name;
  document.getElementById("supModal").showModal();
});
document.getElementById("supNo").onclick = ()=>{ if(!pending) return; cart.addWithSup(pending.name,pending.price,0,[]); pending=null; document.getElementById("supModal").close(); };
document.getElementById("supYes").onclick= ()=>{ if(!pending) return; const t=document.getElementById("supType").value||"supplément"; cart.addWithSup(pending.name,pending.price,1,[t]); pending=null; document.getElementById("supModal").close(); };
document.getElementById("supCancel").onclick= ()=>{ pending=null; document.getElementById("supModal").close(); };

/* Barre panier */
function renderCartBar(){
  const bar=document.getElementById("cartBar");
  document.getElementById("cartTotal").textContent=euro(cart.total());
  bar.classList.toggle("show", cart.items.length>0);
}
document.getElementById("btnView").onclick=openCheckout;
document.getElementById("btnCheckout").onclick=openCheckout;

/* Modal checkout + horaires chips */
function openCheckout(){
  if(cart.items.length===0){ alert("Votre panier est vide."); return; }
  const lines=cart.items.map(i=>{
    const sup=i.sups?` (+${i.sups} suppl. ${i.supsList.join(", ")})`:"";
    return `• ${i.name} × ${i.qty}${sup} — ${euro(i.price + (i.sups?1:0))} €`;
  }).join("\n");
  document.getElementById("ck-list").textContent = lines + `\n\nTotal : ${euro(cart.total())} €`;
  document.getElementById("checkout").showModal();
}
document.getElementById("btnClose").onclick=(e)=>{e.preventDefault();document.getElementById("checkout").close();};

document.getElementById("slot-chips").addEventListener("click",(e)=>{
  const c=e.target.closest(".chip"); if(!c) return;
  document.querySelectorAll(".chip").forEach(x=>x.classList.remove("active"));
  c.classList.add("active");
  document.getElementById("ck-slot").value=c.textContent.trim();
});

document.getElementById("btnSend").onclick=async (e)=>{
  e.preventDefault();
  const name=document.getElementById("ck-name").value.trim();
  const phone=document.getElementById("ck-phone").value.trim();
  const slot=document.getElementById("ck-slot").value.trim();
  const note=document.getElementById("ck-note").value.trim();
  if(!name||!phone||!slot){ alert("Merci de compléter nom, téléphone et heure."); return; }

  const items=cart.items.map(i=>({name:i.name+(i.sups?` (+${i.sups} suppl.)`:""),qty:i.qty,price:i.price+(i.sups?1:0)}));
  const payload={name,phone,slot,note,items,total:Number(cart.total().toFixed(2)),source:"site"};

  if(!API_URL){
    alert("Commande enregistrée (simulation). Merci !");
    cart.clear(); document.getElementById("checkout").close(); return;
  }

  try{
    const res=await fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(payload)});
    const txt=await res.text(); let data; try{data=JSON.parse(txt);}catch{data={ok:false,error:"bad_json",raw:txt};}
    if(!res.ok||!data||data.ok!==true){ throw new Error((data&&data.error)||("HTTP "+res.status)); }
    alert("Commande enregistrée. Merci !");
    cart.clear(); document.getElementById("checkout").close();
  }catch(err){
    console.error(err); alert("Impossible d'envoyer la commande. Merci de réessayer ou de contacter le food-truck.");
  }
};
</script>
</body>
</html>
