<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PIZZâ€™AMIGO â€” Montmerle-sur-SaÃ´ne</title>
  <meta name="color-scheme" content="dark" />
  <style>
    :root {
      --it-red: #d64545;
      --it-green: #1ea63a;
      --it-white: #f4f4f4;
      --bg: #111;
      --panel: #1a1a1a;
      --line: rgba(255, 255, 255, 0.12);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Inter", "Segoe UI", system-ui, sans-serif;
      background: var(--bg);
      color: var(--it-white);
    }

    a {
      color: #9fd6ff;
    }

    header {
      padding: 1.8rem 1rem 1.2rem;
      text-align: center;
      background: var(--panel);
      border-bottom: 1px solid rgba(255, 255, 255, 0.12);
    }

    header h1 {
      margin: 0;
      font-size: clamp(1.8rem, 5vw, 2.4rem);
      color: var(--it-green);
      letter-spacing: 0.3px;
    }

    header p {
      margin: 0.4rem auto 0;
      max-width: 480px;
      line-height: 1.5;
      color: rgba(255, 255, 255, 0.74);
    }

    .status {
      background: var(--it-red);
      color: #fff;
      padding: 0.75rem 1rem;
      text-align: center;
      font-weight: 700;
      border-radius: 10px;
      margin: 1rem;
      box-shadow: 0 10px 30px rgba(214, 69, 69, 0.25);
    }

    h2 {
      margin: 1.8rem 1rem 0.4rem;
      color: var(--it-green);
      font-size: clamp(1.4rem, 4vw, 1.8rem);
    }

    .note {
      margin: 0 1rem 1.4rem;
      color: rgba(255, 255, 255, 0.7);
      line-height: 1.5;
    }

    .menu {
      padding: 0 1rem 6rem;
    }

    .item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      padding: 0.9rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .item:last-child {
      border-bottom: none;
    }

    .item strong {
      font-size: 1rem;
    }

    .item small {
      color: rgba(255, 255, 255, 0.6);
    }

    .item button {
      background: var(--it-red);
      border: none;
      padding: 0.45rem 0.9rem;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.15s ease, filter 0.15s ease;
    }

    .item button:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    /* INFOS PRATIQUES */
    #infos {
      margin: 2.4rem 1rem 6rem;
      padding: 1.2rem 1.4rem;
      background: rgba(255, 255, 255, 0.04);
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      line-height: 1.7;
    }

    #infos h2 {
      margin-top: 0;
      margin-bottom: 0.8rem;
    }

    #infos ul {
      margin: 0;
      padding-left: 1.1rem;
    }

    #infos li {
      margin-bottom: 0.6rem;
    }

    #infos b {
      color: var(--it-red);
    }

    /* PANIER FIXE */
    .cart-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(17, 17, 17, 0.92);
      padding: 0.7rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(6px);
    }

    .cart-bar button {
      background: var(--it-green);
      border: none;
      padding: 0.55rem 1.1rem;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-weight: 700;
      letter-spacing: 0.2px;
    }

    .cart-bar button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* CHECKOUT */
    #checkout {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
    }

    #checkout.active {
      display: flex;
    }

    #checkout .sheet {
      background: var(--panel);
      padding: 1.5rem;
      border-radius: 16px;
      max-width: 420px;
      width: min(420px, 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 20px 45px rgba(0, 0, 0, 0.45);
    }

    #checkout h2 {
      margin-top: 0;
      margin-bottom: 1rem;
    }

    #checkout form {
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
    }

    #checkout input,
    #checkout textarea {
      width: 100%;
      padding: 0.65rem 0.8rem;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: #232323;
      color: var(--it-white);
      font-size: 1rem;
    }

    #checkout textarea {
      min-height: 72px;
      resize: vertical;
    }

    #checkout .times {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.5rem;
    }

    #checkout .chip {
      padding: 0.55rem 0.6rem;
      text-align: center;
      border-radius: 8px;
      cursor: pointer;
      background: #333;
      border: 1px solid rgba(255, 255, 255, 0.15);
      transition: border-color 0.2s ease, background 0.2s ease, color 0.2s ease;
    }

    #checkout .chip.active {
      background: var(--it-green);
      border-color: transparent;
      color: #0c1b12;
      font-weight: 700;
    }

    #checkout .summary {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 10px;
      padding: 0.8rem;
      line-height: 1.5;
      font-size: 0.95rem;
      color: rgba(255, 255, 255, 0.85);
    }

    #checkout .actions {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
      gap: 0.6rem;
    }

    #checkout .actions button {
      flex: 1;
      padding: 0.65rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      letter-spacing: 0.2px;
    }

    #checkout .actions .cancel {
      background: #4d4d4d;
      color: white;
    }

    #checkout .actions .submit {
      background: var(--it-green);
      color: #0c1b12;
    }

    footer {
      padding: 3rem 1rem 5rem;
      text-align: center;
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
    }

    @media (min-width: 720px) {
      body {
        font-size: 18px;
      }

      header {
        padding: 2.4rem 1rem 1.6rem;
      }

      .menu {
        padding: 0 2.5rem 6rem;
      }

      h2 {
        margin-left: 2.5rem;
      }

      .note {
        margin-left: 2.5rem;
      }

      .status {
        margin: 1.4rem auto 1.2rem;
        max-width: 620px;
      }

      #infos {
        margin-left: 2.5rem;
        margin-right: 2.5rem;
      }

      #checkout .sheet {
        padding: 1.8rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>PIZZâ€™AMIGO â€” Montmerle-sur-SaÃ´ne</h1>
    <p>Le goÃ»t authentique de lâ€™Italie prÃ¨s de chez vous.</p>
  </header>

  <div class="status" role="status">ðŸ”´ FermÃ© pour le moment â€” retrouvez-nous ce week-end !</div>

  <h2>Notre carte</h2>
  <p class="note">Boissons : rÃ©glez en ligne, <strong>saveur choisie sur place</strong>.<br>
    <em>SupplÃ©ment (viande / poisson / Å“uf / fromage)</em> : <strong>+1 â‚¬</strong> par ajout.</p>

  <div class="menu">
    <div class="item" data-name="Margharita" data-price="7.5">
      <span><strong>Margharita</strong><br /><small>tomate, emmental</small></span>
      <span>7,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Chasseur" data-price="8.5">
      <span><strong>Chasseur</strong><br /><small>tomate, emmental, champignons</small></span>
      <span>8,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Sicilienne" data-price="8.5">
      <span><strong>Sicilienne</strong><br /><small>tomate, emmental, anchois</small></span>
      <span>8,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Napolitaine" data-price="9">
      <span><strong>Napolitaine</strong><br /><small>tomate, emmental, jambon</small></span>
      <span>9,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Paysanne" data-price="9.5">
      <span><strong>Paysanne</strong><br /><small>tomate, emmental, jambon, Å“uf</small></span>
      <span>9,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Capri" data-price="9.5">
      <span><strong>Capri</strong><br /><small>tomate, emmental, jambon, champignons</small></span>
      <span>9,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Mozzarella" data-price="9.5">
      <span><strong>Mozzarella</strong><br /><small>tomate, emmental, mozzarella</small></span>
      <span>9,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Quatre Saisons" data-price="9.5">
      <span><strong>Quatre Saisons</strong><br /><small>tomate, emmental, oignons, champignons, poivrons, mozzarella</small></span>
      <span>9,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="VÃ©nitienne" data-price="9.5">
      <span><strong>VÃ©nitienne</strong><br /><small>tomate, emmental, roquefort, oignons, crÃ¨me</small></span>
      <span>9,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Oslo" data-price="10">
      <span><strong>Oslo</strong><br /><small>tomate, emmental, thon, champignons, crÃ¨me</small></span>
      <span>10,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Orientale" data-price="10">
      <span><strong>Orientale</strong><br /><small>tomate, emmental, merguez, poivrons</small></span>
      <span>10,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Bolognaise" data-price="10">
      <span><strong>Bolognaise</strong><br /><small>tomate, emmental, viande hachÃ©e, crÃ¨me, mozzarella</small></span>
      <span>10,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="FermiÃ¨re" data-price="10">
      <span><strong>FermiÃ¨re</strong><br /><small>tomate, emmental, Å“uf, lardons, champignons</small></span>
      <span>10,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Miel" data-price="10.5">
      <span><strong>Miel</strong><br /><small>crÃ¨me, emmental, chÃ¨vre frais, miel</small></span>
      <span>10,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="ForestiÃ¨re" data-price="10.5">
      <span><strong>ForestiÃ¨re</strong><br /><small>tomate, emmental, poulet, champignons, crÃ¨me</small></span>
      <span>10,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Lyonnaise" data-price="11">
      <span><strong>Lyonnaise</strong><br /><small>tomate, emmental, saint-marcellin, poulet, crÃ¨me</small></span>
      <span>11,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Quatre Fromages" data-price="11">
      <span><strong>Quatre Fromages</strong><br /><small>tomate, emmental, chÃ¨vre, roquefort, mozzarella</small></span>
      <span>11,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Paradoxe" data-price="11">
      <span><strong>Paradoxe</strong><br /><small>tomate, emmental, Å“uf, jambon, chorizo, mozzarella</small></span>
      <span>11,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="BoisÃ©e" data-price="11">
      <span><strong>BoisÃ©e</strong><br /><small>crÃ¨me, emmental, pomme de terre, poulet, poivrons, sauce gruyÃ¨re</small></span>
      <span>11,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Savoyarde" data-price="11">
      <span><strong>Savoyarde</strong><br /><small>emmental, lardons, reblochon, pomme de terre, crÃ¨me</small></span>
      <span>11,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Carnivore" data-price="11.5">
      <span><strong>Carnivore</strong><br /><small>tomate, emmental, viande hachÃ©e, merguez, Å“uf, mozzarella</small></span>
      <span>11,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="NorvÃ©gienne" data-price="11.5">
      <span><strong>NorvÃ©gienne</strong><br /><small>emmental, saumon fumÃ©, mozzarella, crÃ¨me</small></span>
      <span>11,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Burger" data-price="12">
      <span><strong>Burger</strong><br /><small>tomate, emmental, viande hachÃ©e, oignons, cheddar, tomate cerise, sauce burger</small></span>
      <span>12,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Canette 33cl (choix sur place)" data-price="1.5">
      <span><strong>Canette 33cl (choix sur place)</strong><br /><small>boisson â€” saveur choisie sur place</small></span>
      <span>1,50 â‚¬ <button type="button">Ajouter</button></span>
    </div>
    <div class="item" data-name="Bouteille 50cl (choix sur place)" data-price="3">
      <span><strong>Bouteille 50cl (choix sur place)</strong><br /><small>boisson â€” saveur choisie sur place</small></span>
      <span>3,00 â‚¬ <button type="button">Ajouter</button></span>
    </div>
  </div>

  <div id="infos">
    <h2>Infos pratiques</h2>
    <p><b>Nous trouver :</b></p>
    <ul>
      <li><b>Vendredi soir</b> â€” Saint-Georges-de-Reneins (Parking Caisse dâ€™Ã©pargne) Â· 18:00â€“21:00 â€” <a href="https://maps.google.com/?q=Caisse+d'Ã©pargne+Saint-Georges-de-Reneins" target="_blank" rel="noopener">ItinÃ©raire</a></li>
      <li><b>Samedi soir</b> â€” Amareins (carrefour des feux) Â· 18:00â€“21:00 â€” <a href="https://maps.google.com/?q=Amareins+carrefour+des+feux" target="_blank" rel="noopener">ItinÃ©raire</a></li>
      <li><b>Dimanche soir</b> â€” Amareins (carrefour des feux) Â· 18:00â€“21:00 â€” <a href="https://maps.google.com/?q=Amareins+carrefour+des+feux" target="_blank" rel="noopener">ItinÃ©raire</a></li>
    </ul>
    <p><b>TÃ©lÃ©phone :</b> <a href="tel:0680480456">06 80 48 04 56</a> Â· <a href="https://facebook.com" target="_blank" rel="noopener">Facebook</a></p>
  </div>

  <footer>Â© PIZZâ€™AMIGO â€” Montmerle-sur-SaÃ´ne</footer>

  <div class="cart-bar" aria-live="polite">
    <span id="cart-text">Panier Â· 0,00 â‚¬</span>
    <button id="checkout-btn" type="button" disabled>Commander</button>
  </div>

  <div id="checkout" role="dialog" aria-modal="true" aria-labelledby="checkout-title">
    <div class="sheet">
      <h2 id="checkout-title">Finaliser la commande</h2>
      <div class="summary" id="order-summary">Votre panier est vide.</div>
      <form id="checkout-form">
        <div><input id="cust-name" type="text" name="name" placeholder="Votre nom *" autocomplete="name" required></div>
        <div><input id="cust-phone" type="tel" name="phone" placeholder="TÃ©lÃ©phone *" autocomplete="tel" required></div>
        <div><textarea id="cust-note" name="note" placeholder="Commentaire (optionnel)"></textarea></div>
        <div>
          <div class="times" id="time-chips">
            <div class="chip" role="button" tabindex="0">18:00</div>
            <div class="chip" role="button" tabindex="0">18:30</div>
            <div class="chip" role="button" tabindex="0">19:00</div>
            <div class="chip" role="button" tabindex="0">19:30</div>
            <div class="chip" role="button" tabindex="0">20:00</div>
            <div class="chip" role="button" tabindex="0">20:30</div>
          </div>
          <input type="hidden" id="pickup-time" name="slot" required>
        </div>
        <div class="actions">
          <button type="button" class="cancel" id="cancel-checkout">Fermer</button>
          <button type="submit" class="submit">Envoyer la commande</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const menuEl = document.querySelector('.menu');
    const cartText = document.getElementById('cart-text');
    const checkoutBtn = document.getElementById('checkout-btn');
    const checkoutSheet = document.getElementById('checkout');
    const orderSummary = document.getElementById('order-summary');
    const checkoutForm = document.getElementById('checkout-form');
    const pickupInput = document.getElementById('pickup-time');

    const cart = new Map();

    const euro = (value) => value.toFixed(2).replace('.', ',');

    function refreshCartBar() {
      let total = 0;
      let count = 0;
      cart.forEach(({ qty, price }) => {
        total += price * qty;
        count += qty;
      });
      cartText.textContent = `Panier Â· ${euro(total)} â‚¬${count ? ` (${count} article${count > 1 ? 's' : ''})` : ''}`;
      checkoutBtn.disabled = total === 0;
    }

    function updateSummary() {
      if (cart.size === 0) {
        orderSummary.textContent = 'Votre panier est vide.';
        return;
      }
      const lines = [];
      let total = 0;
      cart.forEach(({ qty, price }, name) => {
        total += price * qty;
        lines.push(`â€¢ ${name} Ã— ${qty} â€” ${euro(price)} â‚¬`);
      });
      lines.push('', `Total : ${euro(total)} â‚¬`);
      orderSummary.textContent = lines.join('\n');
    }

    menuEl.addEventListener('click', (event) => {
      const button = event.target.closest('button');
      if (!button) return;
      const item = event.target.closest('.item');
      if (!item) return;
      const name = item.dataset.name;
      const price = Number.parseFloat(item.dataset.price || '0');
      const existing = cart.get(name) || { qty: 0, price };
      cart.set(name, { qty: existing.qty + 1, price });
      refreshCartBar();
    });

    checkoutBtn.addEventListener('click', () => {
      if (cart.size === 0) {
        alert('Votre panier est vide.');
        return;
      }
      updateSummary();
      checkoutSheet.classList.add('active');
      document.body.style.overflow = 'hidden';
    });

    document.getElementById('cancel-checkout').addEventListener('click', () => {
      checkoutSheet.classList.remove('active');
      document.body.style.overflow = '';
    });

    checkoutSheet.addEventListener('click', (event) => {
      if (event.target === checkoutSheet) {
        checkoutSheet.classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    function selectTime(value) {
      pickupInput.value = value;
      document.querySelectorAll('#time-chips .chip').forEach((chip) => {
        chip.classList.toggle('active', chip.textContent.trim() === value);
      });
    }

    document.getElementById('time-chips').addEventListener('click', (event) => {
      const chip = event.target.closest('.chip');
      if (!chip) return;
      selectTime(chip.textContent.trim());
    });

    document.getElementById('time-chips').addEventListener('keydown', (event) => {
      if (event.key === 'Enter' || event.key === ' ') {
        const chip = event.target.closest('.chip');
        if (!chip) return;
        event.preventDefault();
        selectTime(chip.textContent.trim());
      }
    }, true);

    checkoutForm.addEventListener('submit', (event) => {
      event.preventDefault();
      if (cart.size === 0) {
        alert('Ajoutez des articles au panier avant de commander.');
        return;
      }
      if (!pickupInput.value) {
        alert('Merci de sÃ©lectionner une heure de retrait.');
        return;
      }

      const formData = new FormData(checkoutForm);
      const payload = {
        name: formData.get('name')?.trim(),
        phone: formData.get('phone')?.trim(),
        note: formData.get('note')?.trim(),
        slot: formData.get('slot'),
        items: Array.from(cart.entries()).map(([name, { qty, price }]) => ({ name, qty, price })),
        total: Array.from(cart.values()).reduce((sum, { qty, price }) => sum + price * qty, 0),
      };

      console.log('Commande simulÃ©e', payload);
      alert('Commande enregistrÃ©e (simulation). Merci !');

      cart.clear();
      refreshCartBar();
      checkoutSheet.classList.remove('active');
      document.body.style.overflow = '';
      checkoutForm.reset();
      pickupInput.value = '';
      updateSummary();
    });

    refreshCartBar();
    updateSummary();
  </script>
</body>
</html>
